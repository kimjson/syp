# Migration `20201015123829-rename-book-to-books`

This migration has been generated by jaesung at 10/15/2020, 9:38:29 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `_BookToUser` DROP FOREIGN KEY `_BookToUser_ibfk_1`

ALTER TABLE `pages` DROP FOREIGN KEY `pages_ibfk_1`

CREATE TABLE `books` (
`id` int  NOT NULL  AUTO_INCREMENT,
`title` varchar(191)  NOT NULL ,
`isDefault` boolean  NOT NULL DEFAULT true,
`created_at` datetime(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP(3),
PRIMARY KEY (`id`)
) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `_BookToUser` ADD FOREIGN KEY (`A`) REFERENCES `dbsyp`.`books`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `pages` ADD FOREIGN KEY (`bookId`) REFERENCES `dbsyp`.`books`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

DROP TABLE `Book`
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201015123544-add-books..20201015123829-rename-book-to-books
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 /// 
 model User {
@@ -70,8 +70,10 @@
   isDefault   Boolean   @default(true)
   createdAt   DateTime  @default(now()) @map(name: "created_at")
   pages       Page[]
   users       User[]
+
+  @@map("books")
 }
 model Page {
   id          Int       @id @default(autoincrement())
```


